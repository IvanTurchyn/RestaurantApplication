{"ast":null,"code":"import { catchError, throwError } from 'rxjs';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"../user.service\";\nimport * as i2 from \"@angular/router\";\nclass UserComponent {\n  constructor(userService, router) {\n    this.userService = userService;\n    this.router = router;\n    this.users = [];\n  }\n  ngOnInit() {\n    this.getUsers();\n  }\n  getUsers() {\n    this.userService.getAllUsers().subscribe(users => this.users = users);\n  }\n  getUser(id) {\n    this.userService.getUserById(id).subscribe(user => this.selectedUser = user);\n  }\n  addUser(user) {\n    this.userService.createUser(user).subscribe(newUser => {\n      this.users.push(newUser);\n    });\n  }\n  updateUser(id, user) {\n    this.userService.updateUser(id, user).subscribe(updatedUser => {\n      const index = this.users.findIndex(u => u.id === updatedUser.id);\n      this.users[index] = updatedUser;\n    });\n  }\n  deleteUser(id) {\n    this.userService.deleteUser(id).subscribe(() => {\n      this.users = this.users.filter(u => u.id !== id);\n    });\n  }\n  loginUser(user) {\n    this.userService.loginUser(user).pipe(catchError(error => {\n      console.log(error);\n      return throwError(error);\n    })).subscribe(response => {\n      localStorage.setItem('token', response.token);\n      this.router.navigate(['/home']);\n    });\n  }\n  registerUser(user) {\n    this.userService.registerUser(user).pipe(catchError(error => {\n      console.log(error);\n      return throwError(error);\n    })).subscribe(response => {\n      alert('Rejestracja powiodła się! Możesz się teraz zalogować.');\n      this.router.navigate(['/login']);\n    });\n  }\n}\nUserComponent.ɵfac = function UserComponent_Factory(t) {\n  return new (t || UserComponent)(i0.ɵɵdirectiveInject(i1.UserService), i0.ɵɵdirectiveInject(i2.Router));\n};\nUserComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n  type: UserComponent,\n  selectors: [[\"app-user\"]],\n  decls: 2,\n  vars: 0,\n  template: function UserComponent_Template(rf, ctx) {\n    if (rf & 1) {\n      i0.ɵɵelementStart(0, \"p\");\n      i0.ɵɵtext(1, \"user works!\");\n      i0.ɵɵelementEnd();\n    }\n  },\n  styles: [\"\\n/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IiIsInNvdXJjZVJvb3QiOiIifQ== */\"]\n});\nexport { UserComponent };","map":{"version":3,"names":["catchError","throwError","UserComponent","constructor","userService","router","users","ngOnInit","getUsers","getAllUsers","subscribe","getUser","id","getUserById","user","selectedUser","addUser","createUser","newUser","push","updateUser","updatedUser","index","findIndex","u","deleteUser","filter","loginUser","pipe","error","console","log","response","localStorage","setItem","token","navigate","registerUser","alert","i0","ɵɵdirectiveInject","i1","UserService","i2","Router","selectors","decls","vars","template","UserComponent_Template","rf","ctx","ɵɵelementStart","ɵɵtext","ɵɵelementEnd"],"sources":["D:\\Записи занятий ClickMeeteeng\\Desktop\\Inzeneria oprogramowania\\Cwiczenia\\RestaurantApplication\\frontend\\restaurant-app\\src\\app\\user\\user.component.ts","D:\\Записи занятий ClickMeeteeng\\Desktop\\Inzeneria oprogramowania\\Cwiczenia\\RestaurantApplication\\frontend\\restaurant-app\\src\\app\\user\\user.component.html"],"sourcesContent":["import { Component, OnInit } from '@angular/core';\nimport {catchError, throwError} from 'rxjs';\nimport { User } from '../models/user';\nimport {UserService} from \"../user.service\";\nimport {Router} from \"@angular/router\";\n\n@Component({\n  selector: 'app-user',\n  templateUrl: './user.component.html',\n  styleUrls: ['./user.component.scss']\n})\nexport class UserComponent implements OnInit {\n  users: User[] = [];\n  selectedUser?: User;\n\n  constructor(private userService: UserService, private router: Router) {\n  }\n\n  ngOnInit(): void {\n    this.getUsers();\n  }\n\n  getUsers(): void {\n    this.userService.getAllUsers().subscribe(users => this.users = users);\n  }\n\n  getUser(id: string): void {\n    this.userService.getUserById(id).subscribe(user => this.selectedUser = user);\n  }\n\n  addUser(user: User): void {\n    this.userService.createUser(user).subscribe(newUser => {\n      this.users.push(newUser);\n    });\n  }\n\n  updateUser(id: string, user: User): void {\n    this.userService.updateUser(id, user).subscribe(updatedUser => {\n      const index = this.users.findIndex(u => u.id === updatedUser.id);\n      this.users[index] = updatedUser;\n    });\n  }\n\n  deleteUser(id: string): void {\n    this.userService.deleteUser(id).subscribe(() => {\n      this.users = this.users.filter(u => u.id !== id);\n    });\n  }\n\n  loginUser(user: User): void {\n    this.userService.loginUser(user).pipe(\n      catchError(error => {\n        console.log(error);\n        return throwError(error);\n      })\n    ).subscribe((response: any) => {\n      localStorage.setItem('token', response.token);\n      this.router.navigate(['/home']);\n    });\n  }\n\n  registerUser(user: User): void {\n    this.userService.registerUser(user).pipe(\n      catchError(error => {\n        console.log(error);\n        return throwError(error);\n      })\n    ).subscribe((response: any) => {\n      alert('Rejestracja powiodła się! Możesz się teraz zalogować.');\n      this.router.navigate(['/login']);\n    });\n  }\n}\n","<p>user works!</p>\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}